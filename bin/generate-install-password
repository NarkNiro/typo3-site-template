#!/usr/bin/env php
<?php
require __DIR__ . '/../vendor/autoload.php';

$string = $argv[1] ?? '';

$filterString = trim($string);

if ($filterString === '') {
    throw new \InvalidArgumentException('No string incoming', 1643659900);
}

$passwordHash = new \TYPO3\CMS\Core\Crypto\PasswordHashing\Argon2iPasswordHash();
$generatePasswordHash = $passwordHash->getHashedPassword($filterString);

echo 'Original Version' . "\n";
echo $generatePasswordHash . "\n\n";

echo 'Version to user in .env' . "\n";
echo str_replace('$', '\$', $generatePasswordHash) . "\n";

